<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Mail Items 2</title>
	<script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("/jira/plugins/servlet/mail-items/data")
                .then(response => response.json())
                .then(items => {
                    const tableBody = document.getElementById("mail-items-body");
                    items.forEach(item => {
                        const row = document.createElement("tr");

                        row.innerHTML = `
                            <td>${item.from}</td>
                            <td>${item.to.join(", ")}</td>
                            <td>${item.subject}</td>
                            <td>${item.body}</td>
                        `;

                        tableBody.appendChild(row);
                    });
                });
        });
	</script>
</head>
<body>
<h1>Mail Items</h1>
<table border="1">
	<thead>
	<tr>
		<th>From</th>
		<th>To</th>
		<th>Subject</th>
		<th>Body</th>
	</tr>
	</thead>
	<tbody id="mail-items-body">
	<!-- data will be inserted here -->
	</tbody>
</table>
</body>
</html>
